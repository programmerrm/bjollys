import{r as d,j as e}from"./index-7zqVQZSl.js";import{d as g,M as u}from"./apiSlice-BfTmcDt-.js";import{u as h}from"./crousesApi-CAPuMYWv.js";import{b as p}from"./paymentsApi-_vYWfQkJ.js";import{e as b}from"./index-BKM5EYG8.js";function C(){const m=b(),i=g(t=>t.auth),{data:o}=h(void 0,{refetchOnMountOrArgChange:!0}),s=o==null?void 0:o.data,l=(s==null?void 0:s.single_course_bundles)||[],[r,a]=d.useState(null);d.useEffect(()=>{l.length>0&&a(l[0])},[l]);const[x,{isLoading:c}]=p(),f=async t=>{if(!(i!=null&&i.user))return m("/login/");if(!t){alert("No bundle selected.");return}try{const n=await x({amount:t*100,currency:"usd"}).unwrap();n.url?window.location.href=n.url:alert("Something went wrong. No URL received.")}catch(n){console.error("Payment Error:",n),alert("Payment failed. Please try again.")}};return e.jsx("section",{className:"min-h-screen pb-5 px-4 flex flex-col bg-white",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8 lg:gap-5 grow",children:[e.jsx("div",{className:"rounded-2xl overflow-hidden flex-1/2 grow flex flex-col",children:e.jsx("img",{className:"transition-all duration-300 ease-linear hover:scale-[1.1] h-full grow cursor-pointer",src:`${u}${s==null?void 0:s.image}`,alt:s==null?void 0:s.title})}),e.jsxs("div",{className:"flex-1/2 lg:self-center",children:[e.jsx("h2",{className:"text-2xl text-left font-semibold mb-2",children:s==null?void 0:s.title}),r&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("span",{className:"line-through text-gray-400 mr-2",children:["USD $",r.price]}),e.jsxs("span",{className:"text-red-600 font-bold text-xl",children:["USD $",r.final_price]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-2 font-medium",children:"Course Bundle:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:l.map(t=>e.jsx("button",{onClick:()=>a(t),className:`px-4 py-2 rounded-md text-sm transition border cursor-pointer ${(r==null?void 0:r.id)===t.id?"bg-green-600 text-white":"bg-gray-100 hover:bg-gray-200"}`,children:t.bundle_name},t.id))})]}),e.jsx("div",{className:"flex items-center gap-4 mt-6",children:e.jsx("button",{className:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg font-semibold transition cursor-pointer",onClick:()=>{r&&f(r.final_price)},disabled:c||!r,children:c?"Processing...":"Buy Now"})})]})]})})}export{C as default};
