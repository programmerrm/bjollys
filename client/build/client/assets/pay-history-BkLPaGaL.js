import{j as i}from"./jsx-runtime-0DLF9kdB.js";import{d as S}from"./dayjs.min-_dhynq4M.js";import{g as H,r as F}from"./index-BJYSoprK.js";import{b as G}from"./paymentsApi-zg7RwV-I.js";import"./apiSlice-DZ1uaOkK.js";var T={exports:{}},L=T.exports,U;function Z(){return U||(U=1,function($,M){(function(a,d){$.exports=d()})(L,function(){return function(a,d){var z=d.prototype,D=z.format;z.format=function(u){var e=this,r=this.$locale();if(!this.isValid())return D.bind(this)(u);var p=this.$utils(),y=(u||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function(v){switch(v){case"Q":return Math.ceil((e.$M+1)/3);case"Do":return r.ordinal(e.$D);case"gggg":return e.weekYear();case"GGGG":return e.isoWeekYear();case"wo":return r.ordinal(e.week(),"W");case"w":case"ww":return p.s(e.week(),v==="w"?1:2,"0");case"W":case"WW":return p.s(e.isoWeek(),v==="W"?1:2,"0");case"k":case"kk":return p.s(String(e.$H===0?24:e.$H),v==="k"?1:2,"0");case"X":return Math.floor(e.$d.getTime()/1e3);case"x":return e.$d.getTime();case"z":return"["+e.offsetName()+"]";case"zzz":return"["+e.offsetName("long")+"]";default:return v}});return D.bind(this)(y)}}})}(T)),T.exports}var E=Z();const P=H(E);var Y={exports:{}},q=Y.exports,k;function A(){return k||(k=1,function($,M){(function(a,d){$.exports=d()})(q,function(){var a={year:0,month:1,day:2,hour:3,minute:4,second:5},d={};return function(z,D,u){var e,r=function(o,l,n){n===void 0&&(n={});var t=new Date(o),s=function(f,m){m===void 0&&(m={});var c=m.timeZoneName||"short",x=f+"|"+c,h=d[x];return h||(h=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:f,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:c}),d[x]=h),h}(l,n);return s.formatToParts(t)},p=function(o,l){for(var n=r(o,l),t=[],s=0;s<n.length;s+=1){var f=n[s],m=f.type,c=f.value,x=a[m];x>=0&&(t[x]=parseInt(c,10))}var h=t[3],b=h===24?0:h,g=t[0]+"-"+t[1]+"-"+t[2]+" "+b+":"+t[4]+":"+t[5]+":000",N=+o;return(u.utc(g).valueOf()-(N-=N%1e3))/6e4},y=D.prototype;y.tz=function(o,l){o===void 0&&(o=e);var n,t=this.utcOffset(),s=this.toDate(),f=s.toLocaleString("en-US",{timeZone:o}),m=Math.round((s-new Date(f))/1e3/60),c=15*-Math.round(s.getTimezoneOffset()/15)-m;if(!Number(c))n=this.utcOffset(0,l);else if(n=u(f,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(c,!0),l){var x=n.utcOffset();n=n.add(t-x,"minute")}return n.$x.$timezone=o,n},y.offsetName=function(o){var l=this.$x.$timezone||u.tz.guess(),n=r(this.valueOf(),l,{timeZoneName:o}).find(function(t){return t.type.toLowerCase()==="timezonename"});return n&&n.value};var v=y.startOf;y.startOf=function(o,l){if(!this.$x||!this.$x.$timezone)return v.call(this,o,l);var n=u(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return v.call(n,o,l).tz(this.$x.$timezone,!0)},u.tz=function(o,l,n){var t=n&&l,s=n||l||e,f=p(+u(),s);if(typeof o!="string")return u(o).tz(s);var m=function(b,g,N){var j=b-60*g*1e3,O=p(j,N);if(g===O)return[j,g];var C=p(j-=60*(O-g)*1e3,N);return O===C?[j,O]:[b-60*Math.min(O,C)*1e3,Math.max(O,C)]}(u.utc(o,t).valueOf(),f,s),c=m[0],x=m[1],h=u(c).utcOffset(x);return h.$x.$timezone=s,h},u.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},u.tz.setDefault=function(o){e=o}}})}(Y)),Y.exports}var I=A();const R=H(I);var w={exports:{}},Q=w.exports,W;function X(){return W||(W=1,function($,M){(function(a,d){$.exports=d()})(Q,function(){var a="minute",d=/[+-]\d\d(?::?\d\d)?/g,z=/([+-]|\d\d)/g;return function(D,u,e){var r=u.prototype;e.utc=function(t){var s={date:t,utc:!0,args:arguments};return new u(s)},r.utc=function(t){var s=e(this.toDate(),{locale:this.$L,utc:!0});return t?s.add(this.utcOffset(),a):s},r.local=function(){return e(this.toDate(),{locale:this.$L,utc:!1})};var p=r.parse;r.parse=function(t){t.utc&&(this.$u=!0),this.$utils().u(t.$offset)||(this.$offset=t.$offset),p.call(this,t)};var y=r.init;r.init=function(){if(this.$u){var t=this.$d;this.$y=t.getUTCFullYear(),this.$M=t.getUTCMonth(),this.$D=t.getUTCDate(),this.$W=t.getUTCDay(),this.$H=t.getUTCHours(),this.$m=t.getUTCMinutes(),this.$s=t.getUTCSeconds(),this.$ms=t.getUTCMilliseconds()}else y.call(this)};var v=r.utcOffset;r.utcOffset=function(t,s){var f=this.$utils().u;if(f(t))return this.$u?0:f(this.$offset)?v.call(this):this.$offset;if(typeof t=="string"&&(t=function(h){h===void 0&&(h="");var b=h.match(d);if(!b)return null;var g=(""+b[0]).match(z)||["-",0,0],N=g[0],j=60*+g[1]+ +g[2];return j===0?0:N==="+"?j:-j}(t),t===null))return this;var m=Math.abs(t)<=16?60*t:t,c=this;if(s)return c.$offset=m,c.$u=t===0,c;if(t!==0){var x=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(c=this.local().add(m+x,a)).$offset=m,c.$x.$localOffset=x}else c=this.utc();return c};var o=r.format;r.format=function(t){var s=t||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return o.call(this,s)},r.valueOf=function(){var t=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*t},r.isUTC=function(){return!!this.$u},r.toISOString=function(){return this.toDate().toISOString()},r.toString=function(){return this.toDate().toUTCString()};var l=r.toDate;r.toDate=function(t){return t==="s"&&this.$offset?e(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():l.call(this)};var n=r.diff;r.diff=function(t,s,f){if(t&&this.$u===t.$u)return n.call(this,t,s,f);var m=this.local(),c=e(t).local();return n.call(m,c,s,f)}}})}(w)),w.exports}var V=X();const _=H(V);S.extend(P);S.extend(_);S.extend(R);function rt(){var u;const[$,M]=F.useState(1),{data:a,isLoading:d}=G(`?page=${$}`,{refetchOnMountOrArgChange:!0}),z=()=>{a!=null&&a.next&&M(e=>e+1)},D=()=>{a!=null&&a.previous&&$>1&&M(e=>e-1)};return i.jsx("section",{className:"py-6",children:i.jsxs("div",{className:"container",children:[i.jsx("h1",{className:"text-center text-[2rem] font-semibold leading-[1.4] text-title mb-[1.125rem] md:text-[2.625rem]",children:"Subscription History"}),i.jsxs("div",{className:"p-4 mb-2",children:[i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full mb-4",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-[#f6f6f6]",children:[i.jsx("th",{className:"py-3 px-5 pl-10 text-lg text-left rounded-tl-2xl",children:"Email"}),i.jsx("th",{className:"py-3 px-5 text-lg text-left",children:"Amount"}),i.jsx("th",{className:"py-3 px-5 text-lg text-left",children:"Type"}),i.jsx("th",{className:"py-3 px-5 text-lg text-left rounded-tr-2xl",children:"Paid At"})]})}),i.jsx("tbody",{children:d?i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"text-center py-4",children:"Loading..."})}):(u=a==null?void 0:a.results)==null?void 0:u.map(e=>{var r;return i.jsxs("tr",{className:"border-b border-[#0003] group",children:[i.jsxs("td",{className:"py-3 px-5 pl-10 text-sm md:text-lg text-left rounded-bl-2xl",children:[i.jsx("span",{className:"size-10 bg-[#d9d9d9] rounded-full inline-flex items-center justify-center uppercase mr-2.5",children:(r=e.user.name)==null?void 0:r.split(" ").slice(0,2).map(p=>p[0]).join("")}),e.user.email]}),i.jsxs("td",{className:"py-3 px-5 text-sm md:text-lg text-left",children:[e.amount," $"]}),i.jsx("td",{className:"py-3 px-5 text-sm md:text-lg text-left",children:e.status}),i.jsx("td",{className:"py-3 px-5 text-sm md:text-lg text-left rounded-br-2xl",children:S(e.payment_date).tz("Asia/Dhaka").format("MMMM Do YYYY, h:mm:ss a")})]},e.id)})})]})}),i.jsxs("div",{className:"flex items-center justify-center gap-3 mt-4",children:[i.jsx("button",{onClick:D,disabled:!(a!=null&&a.previous),className:"w-8 h-8 rounded-full flex items-center justify-center bg-gray-200 hover:bg-gray-300 disabled:opacity-40 cursor-pointer",children:"‹"}),i.jsx("span",{className:"text-base font-medium",children:$}),i.jsx("button",{onClick:z,disabled:!(a!=null&&a.next),className:"w-8 h-8 rounded-full flex items-center justify-center bg-gray-200 hover:bg-gray-300 disabled:opacity-40 cursor-pointer",children:"›"})]})]})]})})}export{rt as default};
