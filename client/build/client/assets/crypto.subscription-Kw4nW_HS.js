import{j as t}from"./jsx-runtime-0DLF9kdB.js";import{d as x}from"./apiSlice-DZ1uaOkK.js";import{u as f}from"./cryptoApi-DBEn9sDh.js";import{u as v,a as j}from"./paymentsApi-zg7RwV-I.js";import{e as N}from"./index-CGueamPp.js";import"./index-BJYSoprK.js";function E(){var l,m,u;const o=x(e=>e.auth),{data:n}=f(void 0,{refetchOnMountOrArgChange:!0}),{data:r}=v(void 0,{refetchOnMountOrArgChange:!0}),[p,{isLoading:c}]=j(),y=N(),g=async()=>{var i;const e=(i=n==null?void 0:n.data)==null?void 0:i.price;if(!e){alert("Price not available.");return}try{const a=await p({amount:e*100,currency:"usd"}).unwrap();a.url?window.location.href=a.url:alert("Something went wrong. No URL received.")}catch(a){console.error("Payment Error:",a),alert("Payment failed. Please try again.")}},h=()=>{var a;if(!(o!=null&&o.user)){y("/login");return}const e=(a=r==null?void 0:r.data)==null?void 0:a[r.data.length-1];(e==null?void 0:e.subscription_type)==="crypto"&&(e==null?void 0:e.status)==="active"||g()},s=(l=r==null?void 0:r.data)==null?void 0:l[r.data.length-1],d=(s==null?void 0:s.subscription_type)==="crypto"&&(s==null?void 0:s.status)==="active";return t.jsx("section",{className:"py-[4.375rem]",children:t.jsx("div",{className:"container",children:t.jsx("div",{className:"max-w-[62.5rem] mx-auto p-1 rounded-[1.25rem] bg-gradient-to-r from-primary to-secondary",children:t.jsxs("div",{className:"bg-white rounded-[1.125rem] py-5 px-[0.438rem] sm:p-10",children:[t.jsx("div",{className:"space-y-2.5",dangerouslySetInnerHTML:{__html:(m=n==null?void 0:n.data)==null?void 0:m.body}}),t.jsxs("div",{className:"flex flex-col gap-6",children:[t.jsx("span",{children:(u=o==null?void 0:o.user)==null?void 0:u.email}),t.jsx("button",{className:"py-2 px-6 rounded-xl sm:text-xl cursor-pointer text-title outline-2 outline-transparent bg-gradient-to-r from-primary to-secondary transition-all duration-500 hover:bg-none hover:outline-primary",type:"button",disabled:c||d,onClick:h,children:c?"Processing...":d?"ALL READY SUBSCRIBED":"PAY NOW"})]})]})})})})}export{E as default};
